---
title: "Class_4"
author: "Chris"
date: "10/14/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
acs_vars_2019_5yr <-
  listCensusMetadata(
    name = "2019/acs/acs5",
    type = "variables"
  )

  saveRDS(acs_vars_2019_5yr ,"acs_vars_2019_5yr.rds")




library(tidyverse)
library(censusapi)
Sys.setenv(CENSUS_KEY="c8aa67e4086b4b5ce3a8717f59faa9a28f611dab")

bay_income_white_2019 <- 
  getCensus(
    name = "acs/acs5",
    vintage = "2019",
    region = "county:001,013,041,055,075,081,085,095,097",
    regionin = "state:06",
    vars = "group(B19001A)"
  ) %>% 
  select(ends_with("E") & -c(state, NAME)
  ) %>%
  summarize_all(sum) %>% 
  pivot_longer(
    everything(),
    names_to = "name",
    values_to = "estimate"
  ) %>% 
  left_join(
    acs_vars_2019_5yr %>% 
      select(name, label)
  ) %>% 
  separate(
    label,
    into = c(NA, NA, "income"),
    sep = "!!"
  ) %>% 
  select(
    -c(name)
  ) %>% 
  filter(
    !is.na(income)
  )
  
```

